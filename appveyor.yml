os:
  - Visual Studio 2017
  - Visual Studio 2015

configuration:
  - Debug
  - Release

environment:
  CTEST_OUTPUT_ON_FAILURE: 1

install:
  - vcpkg install tinyxml
  # console_bridge
  - git clone https://github.com/ros/console_bridge.git -b master
  - cd console_bridge
  - md build
  - cd build
  - cmake ..
  - cmake --build . --target INSTALL
  - cd ../..
  # urdfdom_headers
  - git clone https://github.com/ros/urdfdom_headers.git -b master
  - cd urdfdom_headers
  - md build
  - cd build
  - cmake ..
  - cmake --build . --target INSTALL
  - cd ../..
build_script:
  - md build
  - cd build
  - cmake ..
      -DCMAKE_TOOLCHAIN_FILE=c:/tools/vcpkg/scripts/buildsystems/vcpkg.cmake
      -DEXTRA_CMAKE_CXX_FLAGS="-WX"
  - cmake --build . --config %CONFIGURATION%

#test_script:
#  - cmake --build . --config %CONFIGURATION% --target RUN_TESTS

after_build:
  - cmake --build . --config %CONFIGURATION% --target INSTALL
